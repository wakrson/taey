#1 [internal] load local bake definitions
#1 reading from stdin 1.04kB done
#1 DONE 0.0s

#2 [taey internal] load build definition from Dockerfile
#2 transferring dockerfile:
#2 transferring dockerfile: 13.29kB done
#2 DONE 0.0s

#3 [taey_ros2 internal] load metadata for docker.io/nvidia/cuda:12.8.0-cudnn-devel-ubuntu24.04
#3 DONE 0.1s

#4 [taey internal] load metadata for docker.io/nvidia/cuda:12.8.0-cudnn-runtime-ubuntu24.04
#4 DONE 0.1s

#5 [taey_ros2 internal] load .dockerignore
#5 transferring context: 73B done
#5 DONE 0.0s

#6 [taey_ros2 runtime  1/13] FROM docker.io/nvidia/cuda:12.8.0-cudnn-runtime-ubuntu24.04@sha256:c40d1065da90274969f9faa7fe1a7fcd1c374d5783482eec09ee5b516746088f
#6 DONE 0.0s

#7 [taey_ros2 build  1/15] FROM docker.io/nvidia/cuda:12.8.0-cudnn-devel-ubuntu24.04@sha256:81d4dd36435f4ccf0aafb111c6b09182084f0a3ff044ffa5b74bbeb7c5a5fd33
#7 DONE 0.0s

#8 [taey internal] load build context
#8 transferring context: 650B done
#8 DONE 0.0s

#9 [taey_ros2 ros2 1/6] RUN apt update &&     apt install -y locales &&     locale-gen en_US en_US.UTF-8 &&     update-locale LC_ALL=en_US.UTF-8 LANG=en_US.UTF-8 &&     export LANG=en_US.UTF-8 &&     apt install -y software-properties-common &&     add-apt-repository universe &&     apt update &&     export ROS_APT_SOURCE_VERSION=$(curl -s https://api.github.com/repos/ros-infrastructure/ros-apt-source/releases/latest | grep -F "tag_name" | awk -F" '{print $4}') &&     curl -L -o /tmp/ros2-apt-source.deb "https://github.com/ros-infrastructure/ros-apt-source/releases/download/${ROS_APT_SOURCE_VERSION}/ros2-apt-source_${ROS_APT_SOURCE_VERSION}.$(. /etc/os-release && echo ${UBUNTU_CODENAME:-${VERSION_CODENAME}})_all.deb" &&     dpkg -i /tmp/ros2-apt-source.deb &&     apt update &&     apt install -y ros-dev-tools &&     apt update &&     apt upgrade -y &&     apt install -y ros-kilted-desktop
#9 CACHED

#10 [taey_ros2 runtime 10/13] RUN usermod -aG video raymark
#10 CACHED

#11 [taey_ros2 build  5/15] RUN git clone --branch 4.12.0 --depth 1 https://github.com/opencv/opencv.git && 	git clone --branch 4.12.0 --depth 1  https://github.com/opencv/opencv_contrib.git &&     cmake -S opencv -B opencv/build         -D CMAKE_BUILD_TYPE=RELEASE         -D OPENCV_EXTRA_MODULES_PATH=../../opencv_contrib/modules         -D CMAKE_INSTALL_PREFIX=/usr/local         -D WITH_CUDA=ON         -D WITH_CUDNN=ON         -D WITH_CUBLAS=ON         -D WITH_TBB=ON         -D OPENCV_DNN_CUDA=ON         -D CUDA_ARCH_BIN=7.5;8.9         -D CUDA_TOOLKIT_ROOT_DIR=/usr/local/cuda-12.8         -D BUILD_opencv_hdf=OFF         -D BUILD_TESTS=OFF         -D OPENCV_ENABLE_NONFREE=ON .. && 	cmake --build opencv/build -j"$(nproc)" && 	cmake --install opencv/build &&     rm -rf opencv &&     rm -rf opencv_contrib
#11 CACHED

#12 [taey_ros2 build 15/15] RUN /opt/taey/bin/pip install -e /home/raymark/taey
#12 CACHED

#13 [taey_ros2 runtime  3/13] RUN apt-get update &&     apt-get install -y --no-install-recommends         libnvinfer-bin=10.8.0.43-1+cuda12.8         libnvinfer-dev=10.8.0.43-1+cuda12.8         libnvinfer-dispatch-dev=10.8.0.43-1+cuda12.8         libnvinfer-dispatch10=10.8.0.43-1+cuda12.8         libnvinfer-headers-dev=10.8.0.43-1+cuda12.8         libnvinfer-headers-plugin-dev=10.8.0.43-1+cuda12.8         libnvinfer-lean-dev=10.8.0.43-1+cuda12.8         libnvinfer-lean10=10.8.0.43-1+cuda12.8         libnvinfer-plugin-dev=10.8.0.43-1+cuda12.8         libnvinfer-plugin10=10.8.0.43-1+cuda12.8         libnvinfer-samples=10.8.0.43-1+cuda12.8         libnvinfer-vc-plugin-dev=10.8.0.43-1+cuda12.8         libnvinfer-vc-plugin10=10.8.0.43-1+cuda12.8         libnvinfer10=10.8.0.43-1+cuda12.8         libnvonnxparsers-dev=10.8.0.43-1+cuda12.8         libnvonnxparsers10=10.8.0.43-1+cuda12.8         python3-libnvinfer-dev=10.8.0.43-1+cuda12.8         python3-libnvinfer-dispatch=10.8.0.43-1+cuda12.8         python3-libnvinfer-lean=10.8.0.43-1+cuda12.8         python3-libnvinfer=10.8.0.43-1+cuda12.8         tensorrt-dev=10.8.0.43-1+cuda12.8         tensorrt-libs=10.8.0.43-1+cuda12.8         tensorrt=10.8.0.43-1+cuda12.8 &&     rm -rf /var/lib/apt/lists/*
#13 CACHED

#14 [taey_ros2 runtime  7/13] RUN groupdel ubuntu || true
#14 CACHED

#15 [taey_ros2 build  9/15] RUN git clone --branch v2.57.4 https://github.com/IntelRealSense/librealsense.git &&     cmake -S librealsense -B librealsense/build         -DBUILD_EXAMPLES=true         -DBUILD_GRAPHICAL_EXAMPLES=true &&     cmake --build librealsense/build -j$(nproc) &&     cmake --install librealsense/build --prefix /usr/local &&     rm -rf librealsense
#15 CACHED

#16 [taey_ros2 build  6/15] RUN git clone --branch pcl-1.15.1 --depth 1 https://github.com/PointCloudLibrary/pcl.git &&     cmake -S pcl -B pcl/build -DCMAKE_BUILD_TYPE=Release .. &&     cmake --build pcl/build -j"$(nproc)" &&     cmake --install pcl/build &&     rm -rf pcl
#16 CACHED

#17 [taey_ros2 build 13/15] RUN /opt/taey/bin/pip install --upgrade pip
#17 CACHED

#18 [taey_ros2 build  3/15] RUN apt-get update &&     apt-get install -y --no-install-recommends         libnvinfer-bin=10.8.0.43-1+cuda12.8         libnvinfer-dev=10.8.0.43-1+cuda12.8         libnvinfer-dispatch-dev=10.8.0.43-1+cuda12.8         libnvinfer-dispatch10=10.8.0.43-1+cuda12.8         libnvinfer-headers-dev=10.8.0.43-1+cuda12.8         libnvinfer-headers-plugin-dev=10.8.0.43-1+cuda12.8         libnvinfer-lean-dev=10.8.0.43-1+cuda12.8         libnvinfer-lean10=10.8.0.43-1+cuda12.8         libnvinfer-plugin-dev=10.8.0.43-1+cuda12.8         libnvinfer-plugin10=10.8.0.43-1+cuda12.8         libnvinfer-samples=10.8.0.43-1+cuda12.8         libnvinfer-vc-plugin-dev=10.8.0.43-1+cuda12.8         libnvinfer-vc-plugin10=10.8.0.43-1+cuda12.8         libnvinfer10=10.8.0.43-1+cuda12.8         libnvonnxparsers-dev=10.8.0.43-1+cuda12.8         libnvonnxparsers10=10.8.0.43-1+cuda12.8         python3-libnvinfer-dev=10.8.0.43-1+cuda12.8         python3-libnvinfer-dispatch=10.8.0.43-1+cuda12.8         python3-libnvinfer-lean=10.8.0.43-1+cuda12.8         python3-libnvinfer=10.8.0.43-1+cuda12.8         tensorrt-dev=10.8.0.43-1+cuda12.8         tensorrt-libs=10.8.0.43-1+cuda12.8         tensorrt=10.8.0.43-1+cuda12.8 &&     rm -rf /var/lib/apt/lists/*
#18 CACHED

#19 [taey_ros2 runtime  5/13] COPY --from=build /opt/taey /opt/taey
#19 CACHED

#20 [taey_ros2 runtime 12/13] RUN chown -R raymark:raymark /home/raymark/dev/taey /opt/taey
#20 CACHED

#21 [taey_ros2 runtime  2/13] RUN apt-get update &&     apt-get install -y software-properties-common &&     add-apt-repository universe &&     apt-get update &&     apt-get install -y --no-install-recommends         autoconf         automake         build-essential         bzip2         ccache         cmake         cmake-curses-gui         curl         freeglut3-dev         g++         gdb         gedit         gfortran         git         gnupg2         libatlas-base-dev         libavcodec-dev         libavformat-dev         libboost-all-dev         libboost-date-time-dev         libboost-filesystem-dev         libboost-program-options-dev         libboost-serialization-dev         libboost-system-dev         libboost-timer-dev         libcanberra-gtk-module         libdc1394-dev         libeigen3-dev         libflann-dev         libfmt-dev         libgflags-dev         libglu1-mesa         libgoogle-glog-dev         libgstreamer-plugins-base1.0-dev         libgstreamer1.0-dev         libgtk-3-dev         libhdf5-dev         libhdf5-openmpi-dev         libjpeg-dev         liblapack-dev         libmpich-dev         libnpp-dev-12-8         libomp-dev         libopenblas-dev         libopenexr-dev         libopenjp2-7         libopenmpi-dev         libpcap-dev         libpng-dev         libprotobuf-dev         libspdlog-dev         libswscale-dev         libtbb-dev         libtbbmalloc2         libtiff-dev         libtool         libusb-1.0-0-dev         libv4l-dev         libvtk9-dev         libvtk9-qt-dev         libwebp-dev         libx264-dev         libxvidcore-dev         libyaml-cpp-dev         locales         lsb-release         make         mesa-common-dev         mesa-utils         ninja-build         openexr         pkg-config         plocate         protobuf-compiler         python3         python3-dev         python3-numpy         python3-pip         python3.12-venv         qtbase5-dev         sudo         unzip         wget         ca-certificates         gpg         lsb-release &&     rm -rf /var/lib/apt/lists/*
#21 CACHED

#22 [taey_ros2 runtime 11/13] WORKDIR /home/raymark/dev/taey
#22 CACHED

#23 [taey_ros2 build 11/15] COPY requirements.txt pyproject.toml /home/raymark/taey/
#23 CACHED

#24 [taey_ros2 build  8/15] RUN git clone --depth=1 --branch v1.13.0 https://github.com/facebookresearch/faiss.git &&     cmake -S faiss -B faiss/build         -DFAISS_ENABLE_GPU=OFF         -DFAISS_ENABLE_CUVS=OFF         -DFAISS_ENABLE_PYTHON=OFF         -DBUILD_TESTING=OFF         -DBUILD_SHARED_LIBS=ON         -DFAISS_ENABLE_C_API=ON         -DCMAKE_BUILD_TYPE=Release         -DFAISS_OPT_LEVEL=avx2         -DFAISS_USE_LTO=ON         -DCUDAToolkit_ROOT=/usr/local/cuda         -DCMAKE_CUDA_ARCHITECTURES="75;89" &&     cmake --build faiss/build -j$(nproc) &&     cmake --install faiss/build --prefix /usr/local &&     rm -rf faiss
#24 CACHED

#25 [taey_ros2 runtime  8/13] RUN groupadd -g 1000 raymark
#25 CACHED

#26 [taey_ros2 build 14/15] RUN /opt/taey/bin/pip install -r /home/raymark/taey/requirements.txt
#26 CACHED

#27 [taey_ros2 runtime  4/13] COPY --from=build /usr/local /usr/local
#27 CACHED

#28 [taey_ros2 build  2/15] RUN apt-get update &&     apt-get install -y software-properties-common &&     add-apt-repository universe &&     apt-get update &&     apt-get install -y --no-install-recommends         autoconf         automake         build-essential         bzip2         ccache         cmake         cmake-curses-gui         curl         freeglut3-dev         g++         gdb         gedit         gfortran         git         gnupg2         libatlas-base-dev         libavcodec-dev         libavformat-dev         libboost-all-dev         libboost-date-time-dev         libboost-filesystem-dev         libboost-program-options-dev         libboost-serialization-dev         libboost-system-dev         libboost-timer-dev         libcanberra-gtk-module         libdc1394-dev         libeigen3-dev         libflann-dev         libfmt-dev         libgflags-dev         libglu1-mesa         libgoogle-glog-dev         libgstreamer-plugins-base1.0-dev         libgstreamer1.0-dev         libgtk-3-dev         libhdf5-dev         libhdf5-openmpi-dev         libjpeg-dev         liblapack-dev         libmpich-dev         libnpp-dev-12-8         libomp-dev         libopenblas-dev         libopenexr-dev         libopenjp2-7         libopenmpi-dev         libpcap-dev         libpng-dev         libprotobuf-dev         libspdlog-dev         libswscale-dev         libtbb-dev         libtbbmalloc2         libtiff-dev         libtool         libusb-1.0-0-dev         libv4l-dev         libvtk9-dev         libvtk9-qt-dev         libwebp-dev         libx264-dev         libxvidcore-dev         libyaml-cpp-dev         locales         lsb-release         make         mesa-common-dev         mesa-utils         ninja-build         openexr         pkg-config         plocate         protobuf-compiler         python3         python3-dev         python3-numpy         python3-pip         python3.12-venv         qtbase5-dev         sudo         unzip         wget         ca-certificates         gpg         lsb-release &&     rm -rf /var/lib/apt/lists/*
#28 CACHED

#29 [taey_ros2 runtime  9/13] RUN useradd -u 1000 -g 1000 -m raymark
#29 CACHED

#30 [taey_ros2 build 12/15] RUN python3 -m venv /opt/taey
#30 CACHED

#31 [taey_ros2 build  7/15] RUN git clone --branch 4.3a0 --depth 1 https://github.com/borglab/gtsam.git &&     cmake -S gtsam -B gtsam/build         -DCMAKE_INSTALL_PREFIX=/usr/local         -DGTSAM_USE_BOOST_FEATURES=OFF         -DGTSAM_ENABLE_BOOST_SERIALIZATION=ON         -DGTSAM_BUILD_TESTS=OFF         -DGTSAM_BUILD_EXAMPLES=OFF         -DGTSAM_BUILD_EXAMPLES_ALWAYS=OFF         -DGTSAM_WITH_TBB=ON         -DGTSAM_USE_SYSTEM_EIGEN=ON         -DGTSAM_BUILD_SHARED_LIBS=ON         -DGTSAM_BUILD_UNSTABLE=OFF         -DGTSAM_BUILD_WITH_MARCH_NATIVE=ON         -DGTSAM_BUILD_PYTHON=OFF         -DCMAKE_POLICY_VERSION_MINIMUM=3.5         -DCMAKE_POLICY_DEFAULT_CMP0167=OLD         -DCMAKE_CXX_FLAGS="-Wno-error=array-bounds -Wno-error=stringop-overflow -Wno-error=overloaded-virtual" &&     cmake --build gtsam/build -j"$(nproc)" &&     cmake --install gtsam/build &&     rm -rf gtsam
#31 CACHED

#32 [taey_ros2 runtime  6/13] RUN userdel -r ubuntu || true
#32 CACHED

#33 [taey_ros2 build 10/15] COPY scripts /home/raymark/taey/
#33 CACHED

#34 [taey_ros2 build  4/15] RUN set -eux &&     apt-get update &&     mkdir -p /usr/share/keyrings &&     wget -qO- https://apt.kitware.com/keys/kitware-archive-latest.asc         | gpg --dearmor -o /usr/share/keyrings/kitware-archive-keyring.gpg &&     echo "deb [signed-by=/usr/share/keyrings/kitware-archive-keyring.gpg] https://apt.kitware.com/ubuntu/ $(lsb_release -cs) main"         > /etc/apt/sources.list.d/kitware.list &&     apt-get update &&     apt-get install -y cmake;     rm -rf /var/lib/apt/lists/*
#34 CACHED

#35 [taey_ros2 ros2 2/6] RUN rosdep init && rosdep update
#35 CACHED

#36 [taey_ros2 runtime 13/13] RUN echo "source /opt/taey/bin/activate" >> ~/.bashrc
#36 CACHED

#37 [taey] exporting to image
#37 exporting layers done
#37 writing image sha256:2f15c7b4b3b75ef80a2bd1d24ea985c237be2d124a6030d705aa5bcbdefc9535 0.0s done
#37 naming to docker.io/library/taey 0.0s done
#37 DONE 0.0s

#38 [taey] resolving provenance for metadata file
#38 DONE 0.0s

#39 [taey_ros2 ros2 3/6] RUN rosdep install --from-paths ros2/src -y --ignore-src
#39 0.408 /usr/bin/rosdep:6: DeprecationWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html
#39 0.408   from pkg_resources import load_entry_point
#39 0.661 WARNING: ROS_PYTHON_VERSION is unset. Defaulting to 3
#39 0.661 given path 'ros2/src' does not exist
#39 ERROR: process "/bin/sh -c rosdep install --from-paths ros2/src -y --ignore-src" did not complete successfully: exit code: 1
------
 > [taey_ros2 ros2 3/6] RUN rosdep install --from-paths ros2/src -y --ignore-src:
0.408 /usr/bin/rosdep:6: DeprecationWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html
0.408   from pkg_resources import load_entry_point
0.661 WARNING: ROS_PYTHON_VERSION is unset. Defaulting to 3
0.661 given path 'ros2/src' does not exist
------
